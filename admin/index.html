<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Admin - MotesGenerator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
</head>
<body>
    <h1>Adminpanel - Registrerade Profiler</h1>
    <div id="debug-info" style="background: #fee; color: #900; padding: 10px; margin-bottom: 20px; display: none;"></div>
    <table>
        <thead>
            <tr>
                <th>Namn</th>
                <th>Stad</th>
                <th>Typ</th>
            </tr>
        </thead>
        <tbody id="user-list"></tbody>
    </table>

    <script>
        async function loadProfiles() {
            const debugDiv = document.getElementById('debug-info');
            try {
                const response = await fetch('/api/admin');
                if (!response.ok) {
                    throw new Error('API svarade med status: ' + response.status + ' (' + response.statusText + ')');
                }
                const data = await response.json();
                const list = document.getElementById('user-list');
                
                if (data.length === 0) {
                    list.innerHTML = '<tr><td colspan="3">Inga profiler hittades i databasen.</td></tr>';
                } else {
                    list.innerHTML = data.map(u => 
                        <tr>
                            <td>\</td>
                            <td>\</td>
                            <td>\</td>
                        </tr>
                    ).join('');
                }
            } catch (err) {
                debugDiv.style.display = 'block';
                debugDiv.innerText = 'FEL: ' + err.message;
                console.error(err);
            }
        }
        loadProfiles();
    </script>
</body>
</html>
