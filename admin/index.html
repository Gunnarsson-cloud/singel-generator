<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Admin - MotesGenerator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
</head>
<body>
    <h1>Adminpanel - Registrerade Profiler</h1>
    <div id="error-box" style="display:none; color:red; border:1px solid red; padding:10px; margin-bottom:20px;"></div>
    <table>
        <thead>
            <tr><th>Namn</th><th>Stad</th><th>Typ</th></tr>
        </thead>
        <tbody id="user-list"></tbody>
    </table>
    <script>
        async function load() {
            try {
                const res = await fetch('https://agreeable-ground-0ee11971e.4.azurestaticapps.net/api/profiles');
                if (!res.ok) throw new Error('Kunde inte h√§mta data (Status: ' + res.status + ')');
                const data = await res.json();
                const list = document.getElementById('user-list');
                if (data.length === 0) {
                    list.innerHTML = '<tr><td colspan="3">Inga profiler hittades i databasen.</td></tr>';
                } else {
                    list.innerHTML = data.map(u => '<tr><td>'+u.FullName+'</td><td>'+u.City+'</td><td>'+u.SearchType+'</td></tr>').join('');
                }
            } catch (err) {
                const box = document.getElementById('error-box');
                box.style.display = 'block';
                box.innerText = err.message;
            }
        }
        load();
    </script>
</body>
</html>

